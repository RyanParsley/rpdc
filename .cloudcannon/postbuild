#!/bin/bash

# CloudCannon Postbuild Hook - VALIDATION
# POSSE syndication runs automatically during Astro build via integration
# This hook validates the syndication process and provides logging

echo "üîÑ CloudCannon Postbuild: Validating POSSE syndication..."

# Check if any ephemera files have syndication links (indicating successful syndication)
EPHEMERA_DIR="src/content/ephemera"
SYNDICATION_COUNT=$(grep -r "syndication:" "$EPHEMERA_DIR" 2>/dev/null | wc -l)

if [ "$SYNDICATION_COUNT" -gt 0 ]; then
	echo "‚úÖ Found $SYNDICATION_COUNT ephemera posts with syndication links"
	echo "üìù Changes will be committed via SYNC_PATHS configuration"
else
	echo "‚ÑπÔ∏è  No syndicated posts found (this may be normal if no recent posts were processed)"
fi

echo "‚ú® CloudCannon Postbuild: Validation complete"
