#!/bin/bash

# CloudCannon Postbuild Hook - VALIDATION ONLY
# POSSE syndication runs automatically during Astro build via integration
# SYNC_PATHS should handle committing changes back to the repository

echo "üîÑ CloudCannon Postbuild: Validating POSSE syndication..."

# Check if any ephemera files have syndication links (indicating successful syndication)
EPHEMERA_DIR="src/content/ephemera"
SYNDICATION_COUNT=$(grep -r "syndication:" "$EPHEMERA_DIR" 2>/dev/null | wc -l)

if [ "$SYNDICATION_COUNT" -gt 0 ]; then
	echo "‚úÖ Found $SYNDICATION_COUNT ephemera posts with syndication links"
	echo "üìù SYNC_PATHS should commit these changes back to the repository"
else
	echo "‚ÑπÔ∏è  No syndicated posts found (this may be normal if no recent posts were processed)"
fi

echo "‚ú® CloudCannon Postbuild: Complete"
